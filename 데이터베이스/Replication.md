## DB Replication
데이터베이스의 고가용성과 데이터 안정성을 보장하기 위해 사용된다. 대규모 애플리케이션 환경에서 가용성과 신뢰성이 중요하기 때문에, 원본(Source) 서버와 복제(Replica) 서버 간의 데이터 동기화는 필수적이다.

### 바이너리 로그를 저장하는 방식
Replication은 원본 서버에서 발생하는 모든 데이터 변경 사항을 복제 서버로 복제하여 두 서버 간의 데이터 일관성을 유지하는 메커니즘. 주로 바이너리 로그를 기반으로 이루어진다.

MySQL은 바이너리 로그를 저장하는 방식으로 3가지를 제공한다.

### Row
데이터베이스의 각 행별로 내용을 정확히 기록한다. 데이터 일관성을 매우 높게 유지할 수 있다는 장점이 있다. 모든 행의 변경사항을 저장하기 때문에 로그 파일의 크기가 매우 커질 수 있어 저장공간에 부담이 되는 단점이 있다.

### Statement
데이터 변경을 일으킨 SQL 문을 바이너리 로그에 기록한다. 로그 파일 크기가 상대적으로 작은 장점이 있다. 하지만 실행할 때마다 다른 값을 반환하는 함수 SQL 쿼리가 실행될 경우, 동일한 쿼리가 Source와 Replica 서버에서 다른 결과를 초래할 수 있어 데이터 불일치 문제가 발생할 수 있다.

예를 들어, SELECT NOW()와 같은 함수는 실행 시점에 따라 다른 결과를 반환할 수 있기 때문에, 이를 포함한 쿼리는 복제 시 문제가 될 수 있습니다.

### Mixed
이러한 문제를 보완하기 위해 MySQL은 Mixed 방식을 제공. Mixed 방식은 상황에 따라 row 기반과 statement 기반을 혼합하여 로그를 기록. 

### 복제과정
Source 서버에서 데이터 변경 쿼리가 실행되고,

선택된 로그 저장 방식에 따라 Binary log에 기록된 후, 

Replica 서버의 IO Thread가 Binary log를 읽어와 Replica 서버의 Relay log로 전송.

Relay log는 Replica 서버에서 Source 서버의 Binary log를 저장하는 임시 저장소 역할을 하며, 이곳에 저장된 로그를 기반으로 Replica 서버의 SQL 스레드가 실제 데이터베이스에 변경 사항을 적용합니다.

