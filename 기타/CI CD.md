## CI/CD
CI/CD 파이프라인이라고 부르며, CI/CD 파이프라인을 구축하기 위한 도구로 Jenkins, Travis CI, Github Action 등이 존재합니다.

### CI(Continuous Integration) 지속적 통합
개발자가 작성한 코드 변경을 코드 베이스에 통합하는 경우, 변경된 부분이 통합되면 자동으로 새로운 시스템을 빌드하고, 현재 시스템에 있는 모든 테스트를 실행합니다.

변경으로 인해 이전에 작동했던 것이 오류를 발생하는 경우 다시 수정을 합니다.

이러한 과정을 지속적 통합이라고 합니다.

지속적 통합의 목표는 소프트웨어의 품질을 개선하고, 새로운 변경사항을 검증하는데 소요되는 시간을 줄이고, 버그를 조기에 발견하기 위함입니다.
### 마틴 파울러가 제시하는 CI 4가지 규칙
- 모든 소스코드가 살아있고 누구든 현재의 소스에 접근할 수 있는 단일 지점을 유지할 것.
- 빌드 프로세스를 자동화해서 누구든 소스로부터 시스템을 빌드할 수 있게 할 것.
- 테스팅을 자동화해서 언제든지 시스템에 대한 건전한 테스트 수트를 실행할 수 있게 할 것.
- 누구든 현재 실행파일을 얻으면 지금까지 가장 완벽한 실행파일을 얻었다는 확신을 하게 할 것.

### CD(Continuous Deployment) 지속적 배포
지속적 배포는 지속적 통합을 통해서 빌드된 코드(빌드 아티팩트)를 production 환경에 자동으로 배포하는 것을 의미합니다.

CD과정에는 빌드 아티팩트를 관리하고 저장하는 공간이 필요할 수 있습니다. AWS S3, Docker Registry, Nexus 등을 활용할 수 있습니다.


## 무중단 배포
배포 자동화를 통해 서비스를 운영중인 경우, 새로운 빌드를 하는 경우 기존 서비스가 종료되고 새로운 서비스가 시작되는 중간에 '다운 타임'이 발생합니다. 이것을 해결하기 위한 것이 무중단 배포입니다.

### 무중단 배포 구현 방법
- AWS에서 Blue-Green 무중단 배포
- 도커를 이용한 무중단 배포
- L4, L7 스위치를 이용한 무중단 배포
- Nginx를 이용한 무중단 배포 => 쉬운 방법

### 리버스 프록시
- 인터넷과 서버 사이에 위치한 중계 서버
- 클라이언트가 요청한 내용을 캐싱
- 서버를 클라이언트로부터 숨길 수 있어 보안에 용이
- 로드 밸런싱

### 로드 밸런싱
- 부하 분산
- 서버에 가해지는 부하를 분산해줌
- 하나의 서버가 멈추더라도 서비스 중단 없이 다른 서버가 서비스를 계속 유지할 수 있는 무중단 배포가 가능

### 무중단 배포 방식
- Rolling 배포
- Canary 배포
- Blue-Green 배포

### Rolling 배포
- 가장 기본적인 방식
- 서버를 차례대로 업데이트 시키는 방식
#### 장점
인스턴스를 추가하지 않아도 돼서 관리가 편함
#### 단점
사용중인 인스턴스에 트래픽이 몰릴 수 있습니다. 구버전과 신버전이 공존해서 호환성에 문제가 생길 수 있습니다.

### Canary 배포
- 신버전을 소수의 사용자들에게만 배포
- 문제가 없는 것이 확인되면 점진적으로 다른 서버에 신버전 배포
#### 장점
문제상황을 빠르게 감지 가능합니다. A/B테스트로 활용이 가능합니다.
#### 단점
모니터링 관리 비용이 크고, 구버전과 신버전이 공존합니다.

### Blue-Green 배포
- Blue를 구버전 Green을 신버전으로 지칭
- 구버전과 동일하게 신버전의 인스턴스를 구성
- 신버전 배포 시 로드 밸런서를 통해 신버전으로만 트래픽을 전환
#### 장점
배포하는 속도가 빠릅니다. 신속하게 롤백이 가능합니다. 남아있는 기존 버전의 환경을 다음 배포에 재사용할 수 있습니다.
#### 단점
시스템 자원이 2배로 필요합니다.