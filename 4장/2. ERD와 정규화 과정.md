# ERD와 정규화 과정
ERD는 데이터베이스를 구축할 때 가장 기초적인 뼈대 역할.
릴레이션 간의 관계를 정의한 것.

## 1. ERD의 중요성
ERD는 시스템 요구사항을 기반으로 작성된다. ERD를 기반으로 데이터베이스를 구축한다.

관계형 구조로 표현할 수 있는 데이터는 좋지만, 비정형 데이터는 표현하기 어렵다.

## 2. 예제로 배우는 ERD
~

## 3. 정규화 과정
릴레이션 간의 잘못된 종속 관계로 인해 데이터베이스의 이상현상이 일어나 해결하거나 또는 저장공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정.

DB이상현상 : 회원이 한 개의 등급을 가져야하는데 세 개를 가지고 있거나 삭제할 때 필요한 데이터가 같이 삭제되고, NULL 때문에 삽입이 안되는 등의 현상.

정규형을 거친다고 해서 성능이 100% 좋아지는 것은 아니다.

테이블을 나누게 되면 어떤 쿼리는 조인을 해야하기 때문에 느려질 가능성도 있다. 서비스에 따라 비정규화를 하기도 한다.

정규형 : 제1정규형, 제2정규형, 제3정규형, 보이스/코드 정규형, 제4정규형, 제5정규형

### 정규형 원칙
좋은 구조로 표현, 자료의 중복성 감소, 동립적인 관계는 별개의 릴레이션으로 표현, 각각의 릴레이션은 독립적인 표현이 가능.

### 제1정규형
모든 도메인이 더이상 분리될 수 없는 원자 값으로 구성되어야한다.

수강명이 {c++, java} 이면 각각 분리해서 2개의 레코드 c++, java로 분리해야함.

### 제2정규형
제1정규형을 만족하면서 부분함수의 종속정을 제거.

기본키가 아닌 모든 속성이 기본키에 완전함수 종속적.

{유저번호, 유저ID, 수강명, 성취도} => {유저번호, 유저ID}, {유저ID, 수강명, 성취도}

### 제3정규형
제2정규형을 만족하면서 기본키가 아닌 모든 속성이 이행적 함수 종속을 만족하지 않는 상태.

#### 이행적 함수 종속
A->B와 B->C가 존재하면 논리적으로 A->C가 성립하는데, 이때 C가 A에 이행적으로 함수 종속되었다고 함.

{유저ID, 등급, 할인율} => {유저ID, 등급}, {등급, 할인율}

### 보이스/코드 정규형(BCNF)
제3정규형을 만족, 결정자가 후보키가 아닌 함수 종속 관계를 제거해 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키인 상태.

> 결정자
>
> X->Y일때 X가 결정자, Y가 종속자

{학번, 수강명, 강사} 인 테이블
후보키는 {학번, 수강명} {학번, 강사}
강사는 결정자이지만 후보키는 아니다.

{학번, 강사}, {수강명, 강사} 분리.

